(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{221:function(t,e,r){"use strict";r.r(e);var n={name:"CardComponent",props:{title:{type:String,default:null},icon:{type:String,default:null},headerIcon:{type:String,default:null}},methods:{headerIconClick:function(){this.$emit("header-icon-click")}}},l=r(22),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[t.title?r("header",{staticClass:"card-header"},[r("p",{staticClass:"card-header-title"},[t.icon?r("b-icon",{attrs:{icon:t.icon,"custom-size":"default"}}):t._e(),t._v("\n      "+t._s(t.title)+"\n    ")],1),t._v(" "),t.headerIcon?r("a",{staticClass:"card-header-icon",attrs:{href:"#","aria-label":"more options"},on:{click:function(e){return e.preventDefault(),t.headerIconClick(e)}}},[r("b-icon",{attrs:{icon:t.headerIcon,"custom-size":"default"}})],1):t._e()]):t._e(),t._v(" "),r("div",{staticClass:"card-content"},[t._t("default")],2)])}),[],!1,null,null,null);e.default=component.exports},222:function(t,e,r){"use strict";r.r(e);r(228);var n=r(221),l={name:"CardWidget",components:{GrowingNumber:r(225).default,CardComponent:n.default},props:{description:{type:String,default:""},icon:{type:String,default:null},number:{type:Number,default:0},prefix:{type:String,default:null},suffix:{type:String,default:null},label:{type:String,default:null},type:{type:String,default:null}}},o=r(22),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card-component",[r("div",{staticClass:"level"},[r("div",{staticClass:"level-item"},[r("div",{staticClass:"is-widget-label"},[r("h3",{staticClass:"subtitle is-spaced is-size-6-touch"},[t._v("\n                    "+t._s(t.label)+"\n                    "),r("b-tooltip",{attrs:{label:t.description,type:"is-light",position:"is-top",active:t.active}},[r("sup",[r("b-icon",{attrs:{icon:"help-circle-outline",size:"is-small",type:"is-grey"}})],1)])],1),t._v(" "),r("h1",{staticClass:"title is-size-5-touch"},[r("growing-number",{attrs:{value:t.number,prefix:t.prefix,suffix:t.suffix}})],1)]),t._v(" "),t.icon?r("div",{staticClass:"level-item has-widget-icon"},[r("div",{staticClass:"is-widget-icon"},[r("b-icon",{attrs:{icon:t.icon,size:"is-large",type:t.type}})],1)]):t._e()])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{GrowingNumber:r(225).default,CardComponent:r(221).default})},223:function(t,e,r){"use strict";r.r(e);var n={extends:r(226).c,props:["chartData","options"],methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}},l=r(22),component=Object(l.a)(n,void 0,void 0,!1,null,null,null);e.default=component.exports},224:function(t,e,r){"use strict";r.r(e);var n={extends:r(226).d,props:["chartData","options"],methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}},l=r(22),component=Object(l.a)(n,void 0,void 0,!1,null,null,null);e.default=component.exports},225:function(t,e,r){"use strict";r.r(e);r(228),r(56);var n=r(365),l=r.n(n),o={name:"GrowingNumber",props:{prefix:{type:String,default:null},suffix:{type:String,default:null},value:{type:Number,default:0},duration:{type:Number,default:500}},data:function(){return{newValue:0,step:0}},computed:{newValueFormatted:function(){return this.newValue<1e3?this.newValue:l()(this.newValue).format("0,0")}},watch:{value:function(){this.growInit()}},mounted:function(){this.growInit()},methods:{growInit:function(){var t=this.value/(this.duration/25);this.grow(t)},grow:function(t){var e=this,r=Math.ceil(this.newValue+t);if(r>this.value)return this.newValue=this.value,!1;this.newValue=r,setTimeout((function(){e.grow(t)}),25)}}},c=r(22),component=Object(c.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v(this._s(this.prefix)+this._s(this.newValueFormatted)+this._s(this.suffix))])}),[],!1,null,null,null);e.default=component.exports},227:function(t,e,r){"use strict";var base="https://qju04f7u0a.execute-api.ap-southeast-1.amazonaws.com/dev";e.a={BASE:base,TABLEVISION:"/tables",TABLEVISIONSTATS:"/stats",RFIDFSRVISIO:"/rfid_fsr",RFIDTRAYINOUT:"/tray_in_out",RFIDTRAYIN:"/tray_in",RETURNDISTRVISION:"/g6trayreturndistr",STALLTOTALVISION:"/g6total",BARCHART:"/g6barchart",G6OVERVIEW:"/g6overview",OVERVIEW2:"/overview2",OVERVIEW:"/overview/tray_return"}},364:function(t,e,r){"use strict";var n=r(2),l=r(39),o=r(367),c=r(159),h=r(5),d=1..toFixed,f=Math.floor,j=function(t,e,r){return 0===e?r:e%2==1?j(t,e-1,r*t):j(t*t,e/2,r)};n({target:"Number",proto:!0,forced:d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!h((function(){d.call({})}))},{toFixed:function(t){var e,r,n,h,d=o(this),v=l(t),data=[0,0,0,0,0,0],C="",m="0",w=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*data[r],data[r]=n%1e7,n=f(n/1e7)},y=function(t){for(var e=6,r=0;--e>=0;)r+=data[e],data[e]=f(r/t),r=r%t*1e7},I=function(){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=String(data[t]);s=""===s?e:s+c.call("0",7-e.length)+e}return s};if(v<0||v>20)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return String(d);if(d<0&&(C="-",d=-d),d>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(d*j(2,69,1))-69)<0?d*j(2,-e,1):d/j(2,e,1),r*=4503599627370496,(e=52-e)>0){for(w(0,r),n=v;n>=7;)w(1e7,0),n-=7;for(w(j(10,n,1),0),n=e-1;n>=23;)y(1<<23),n-=23;y(1<<n),w(1,1),y(2),m=I()}else w(0,r),w(1<<-e,0),m=I()+c.call("0",v);return m=v>0?C+((h=m.length)<=v?"0."+c.call("0",v-h)+m:m.slice(0,h-v)+"."+m.slice(h-v)):C+m}})},366:function(t,e,r){var map={"./af":229,"./af.js":229,"./ar":230,"./ar-dz":231,"./ar-dz.js":231,"./ar-kw":232,"./ar-kw.js":232,"./ar-ly":233,"./ar-ly.js":233,"./ar-ma":234,"./ar-ma.js":234,"./ar-sa":235,"./ar-sa.js":235,"./ar-tn":236,"./ar-tn.js":236,"./ar.js":230,"./az":237,"./az.js":237,"./be":238,"./be.js":238,"./bg":239,"./bg.js":239,"./bm":240,"./bm.js":240,"./bn":241,"./bn-bd":242,"./bn-bd.js":242,"./bn.js":241,"./bo":243,"./bo.js":243,"./br":244,"./br.js":244,"./bs":245,"./bs.js":245,"./ca":246,"./ca.js":246,"./cs":247,"./cs.js":247,"./cv":248,"./cv.js":248,"./cy":249,"./cy.js":249,"./da":250,"./da.js":250,"./de":251,"./de-at":252,"./de-at.js":252,"./de-ch":253,"./de-ch.js":253,"./de.js":251,"./dv":254,"./dv.js":254,"./el":255,"./el.js":255,"./en-au":256,"./en-au.js":256,"./en-ca":257,"./en-ca.js":257,"./en-gb":258,"./en-gb.js":258,"./en-ie":259,"./en-ie.js":259,"./en-il":260,"./en-il.js":260,"./en-in":261,"./en-in.js":261,"./en-nz":262,"./en-nz.js":262,"./en-sg":263,"./en-sg.js":263,"./eo":264,"./eo.js":264,"./es":265,"./es-do":266,"./es-do.js":266,"./es-mx":267,"./es-mx.js":267,"./es-us":268,"./es-us.js":268,"./es.js":265,"./et":269,"./et.js":269,"./eu":270,"./eu.js":270,"./fa":271,"./fa.js":271,"./fi":272,"./fi.js":272,"./fil":273,"./fil.js":273,"./fo":274,"./fo.js":274,"./fr":275,"./fr-ca":276,"./fr-ca.js":276,"./fr-ch":277,"./fr-ch.js":277,"./fr.js":275,"./fy":278,"./fy.js":278,"./ga":279,"./ga.js":279,"./gd":280,"./gd.js":280,"./gl":281,"./gl.js":281,"./gom-deva":282,"./gom-deva.js":282,"./gom-latn":283,"./gom-latn.js":283,"./gu":284,"./gu.js":284,"./he":285,"./he.js":285,"./hi":286,"./hi.js":286,"./hr":287,"./hr.js":287,"./hu":288,"./hu.js":288,"./hy-am":289,"./hy-am.js":289,"./id":290,"./id.js":290,"./is":291,"./is.js":291,"./it":292,"./it-ch":293,"./it-ch.js":293,"./it.js":292,"./ja":294,"./ja.js":294,"./jv":295,"./jv.js":295,"./ka":296,"./ka.js":296,"./kk":297,"./kk.js":297,"./km":298,"./km.js":298,"./kn":299,"./kn.js":299,"./ko":300,"./ko.js":300,"./ku":301,"./ku.js":301,"./ky":302,"./ky.js":302,"./lb":303,"./lb.js":303,"./lo":304,"./lo.js":304,"./lt":305,"./lt.js":305,"./lv":306,"./lv.js":306,"./me":307,"./me.js":307,"./mi":308,"./mi.js":308,"./mk":309,"./mk.js":309,"./ml":310,"./ml.js":310,"./mn":311,"./mn.js":311,"./mr":312,"./mr.js":312,"./ms":313,"./ms-my":314,"./ms-my.js":314,"./ms.js":313,"./mt":315,"./mt.js":315,"./my":316,"./my.js":316,"./nb":317,"./nb.js":317,"./ne":318,"./ne.js":318,"./nl":319,"./nl-be":320,"./nl-be.js":320,"./nl.js":319,"./nn":321,"./nn.js":321,"./oc-lnc":322,"./oc-lnc.js":322,"./pa-in":323,"./pa-in.js":323,"./pl":324,"./pl.js":324,"./pt":325,"./pt-br":326,"./pt-br.js":326,"./pt.js":325,"./ro":327,"./ro.js":327,"./ru":328,"./ru.js":328,"./sd":329,"./sd.js":329,"./se":330,"./se.js":330,"./si":331,"./si.js":331,"./sk":332,"./sk.js":332,"./sl":333,"./sl.js":333,"./sq":334,"./sq.js":334,"./sr":335,"./sr-cyrl":336,"./sr-cyrl.js":336,"./sr.js":335,"./ss":337,"./ss.js":337,"./sv":338,"./sv.js":338,"./sw":339,"./sw.js":339,"./ta":340,"./ta.js":340,"./te":341,"./te.js":341,"./tet":342,"./tet.js":342,"./tg":343,"./tg.js":343,"./th":344,"./th.js":344,"./tk":345,"./tk.js":345,"./tl-ph":346,"./tl-ph.js":346,"./tlh":347,"./tlh.js":347,"./tr":348,"./tr.js":348,"./tzl":349,"./tzl.js":349,"./tzm":350,"./tzm-latn":351,"./tzm-latn.js":351,"./tzm.js":350,"./ug-cn":352,"./ug-cn.js":352,"./uk":353,"./uk.js":353,"./ur":354,"./ur.js":354,"./uz":355,"./uz-latn":356,"./uz-latn.js":356,"./uz.js":355,"./vi":357,"./vi.js":357,"./x-pseudo":358,"./x-pseudo.js":358,"./yo":359,"./yo.js":359,"./zh-cn":360,"./zh-cn.js":360,"./zh-hk":361,"./zh-hk.js":361,"./zh-mo":362,"./zh-mo.js":362,"./zh-tw":363,"./zh-tw.js":363};function n(t){var e=l(t);return r(e)}function l(t){if(!r.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}n.keys=function(){return Object.keys(map)},n.resolve=l,t.exports=n,n.id=366},367:function(t,e,r){var n=r(23);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},371:function(t,e,r){"use strict";r.r(e);var n={extends:r(226).a,props:["chartData","options"],methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}},l=r(22),component=Object(l.a)(n,void 0,void 0,!1,null,null,null);e.default=component.exports},376:function(t,e,r){"use strict";r.r(e);r(364),r(57),r(56);var n=r(222),l=r(221),o=(r(371),r(223),r(227)),c=(r(224),{components:{CardWidget:n.default,CardComponent:l.default},computed:{selectedDate:function(){return this.date?this.date.getFullYear()+","+(parseInt(this.date.getMonth())+1)+","+(1==(this.date.getDate()+"").length?"0"+this.date.getDate():this.date.getDate()):(console.log("Not this.date"),console.log(this.date.getDate()),"2020,10,12")}},data:function(){var t=new Date;return{date:t,minDate:new Date(t.getFullYear()-80,t.getMonth(),t.getDate()),maxDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()),interval:null,lineChartAPIStatus:"Offline",lineChartTable:[],pieChartAPIStatus:"Offline",pieChartTable:[],barChartAPIStatus:"Offline",barChartTable:[],selfReturn:0,cleanerClear:0,haichewReturns:{labels:["Trays Returned Here","Trays Not Returned Here"],datasets:[{backgroundColor:["#409cd2","#ee4350"],pointBackgroundColor:"white",borderWidth:1,pointBorderColor:"#249EBF",data:[]}]},overallInsights:{labels:["19 Oct","23 Oct","26 Oct","7 Nov"],datasets:[{label:"Trays returned",BackgroundColor:"#white",borderWidth:3,borderColor:"#7AD7F0",pointBorderColor:"#7AD7F0",data:[],hidden:!0},{label:"Tray distributed",BackgroundColor:"white",borderWidth:3,borderColor:"#ef4250",pointBorderColor:"#249EBF",data:[],hidden:!0},{label:"Tray return rate",BackgroundColor:"white",borderWidth:3,borderColor:"#3BB143",pointBorderColor:"#249EBF",data:[]}]},patronReturnInsights:{labels:["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],datasets:[{label:"Trays returned",BackgroundColor:"#white",borderWidth:3,borderColor:"#7AD7F0",pointBorderColor:"#7AD7F0",data:[]},{label:"Tray distributed",BackgroundColor:"white",borderWidth:3,borderColor:"#ef4250",pointBorderColor:"#249EBF",data:[]}]}}},watch:{lineChartTable:function(){this.$refs.haichewLineChart.renderChart(this.patronReturnInsights)},pieChartTable:function(){this.$refs.haichewPieChart.renderChart(this.haichewReturns)},barChartTable:function(){this.$refs.haichewBarChart.renderChart(this.overallInsights)},date:function(){this.haichewReturns.datasets[0].data=[],this.patronReturnInsights.datasets[0].data=[],this.patronReturnInsights.datasets[1].data=[],this.getLineChartData(),this.getPieChartData()}},methods:{startAPIPolling:function(t){var e=this;t?(this.getLineChartData(),this.getPieChartData(),this.getBarChartData(),this.interval=setInterval((function(){e.patronReturnInsights.datasets[0].data=[],e.patronReturnInsights.datasets[1].data=[],e.getLineChartData(),e.getPieChartData()}),1e4)):clearInterval(this.interval)},getLineChartData:function(){var t=this;this.$axios.get(o.a.BASE+o.a.RETURNDISTRVISION+"/1/"+this.selectedDate).then((function(e){for(var data=e.data,r=data.returns,n=data.distr,l=0,o=Object.keys(r);l<o.length;l++){var c=r[o[l]];t.lineChartTable.push(c),t.patronReturnInsights.datasets[0].data.push(c)}for(var h=0,d=Object.keys(n);h<d.length;h++){c=n[d[h]];t.lineChartTable.push(c),t.patronReturnInsights.datasets[1].data.push(c)}t.lineChartAPIStatus="LIVE"})).catch((function(e){if(t.lineChartAPIStatus="Offline",t.lineChartTable=[],null!=e.response){var r=e.response.data;t.toastAlert(r.message,"is-danger",5e3),console.log("haichew "+r.message)}else"Offline"!=t.lineChartAPIStatus&&(t.toastAlert(e,"is-danger",5e3),console.log("haichew "+e))}))},getBarChartData:function(){var t=this;this.$axios.get(o.a.BASE+o.a.BARCHART).then((function(e){var data=e.data,r=data.returns,n=data.distr;console.log(r),console.log(n);for(var l=0,o=Object.keys(r);l<o.length;l++)for(var c=o[l],h=0,d=Object.keys(n);h<d.length;h++){var f=d[h];c==f&&(console.log(c),console.log(r[c]),t.barChartTable.push(r[c]),t.overallInsights.datasets[0].data.push(r[c]),t.overallInsights.datasets[1].data.push(n[f]),t.overallInsights.datasets[2].data.push(parseFloat(r[c]/n[f]*100).toFixed(0)))}t.barChartAPIStatus="LIVE"})).catch((function(e){if(t.barChartAPIStatus="Offline",t.barChartTable=[],null!=e.response){var r=e.response.data;t.toastAlert(r.message,"is-danger",5e3),console.log("haichew bar chart"+r.message)}else"Offline"!=t.barChartAPIStatus&&(t.toastAlert(e,"is-danger",5e3),console.log("haichew bar chart"+e))}))},getPieChartData:function(){var t=this;this.$axios.get(o.a.BASE+o.a.STALLTOTALVISION+"/1/"+this.selectedDate).then((function(e){var data=e.data,r=data.NotReturned,n=data.Returned,l=data.Cleared,o=r+n;console.log("Total: "+o),console.log("Returned:"+n),t.selfReturn=parseFloat(n/o*100).toFixed(0),t.cleanerClear=l,console.log(t.selfReturn);t.haichewReturns.datasets[0].data=[n,r],t.pieChartTable.push(0),t.pieChartAPIStatus="LIVE"})).catch((function(e){if(t.pieChartAPIStatus="Offline",null!=e.response){var r=e.response.data;t.pieChartTable=[],t.toastAlert(r.message,"is-danger",5e3),console.log("haichew pie chart "+r.message)}else"Offline"!=t.pieChartAPIStatus&&(t.toastAlert(e,"is-danger",5e3),console.log("haichew pie chart"+e))}))}}}),h=r(22),component=Object(h.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("div"),t._v(" "),r("div",{staticClass:"columns mt-5 is-multiline is-tablet"},[r("div",{staticClass:"column is-4 has-text-centered"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-content"},[r("p",{staticClass:"title is-size-5-touch"},[t._v("Daily Tray Return Count")]),t._v(" "),r("b-field",{attrs:{label:"Select a date"}},[r("b-datepicker",{attrs:{placeholder:"Click to select...","min-date":t.minDate,"max-date":t.maxDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),r("line-chart",{ref:"haichewLineChart",attrs:{chartData:this.patronReturnInsights}})],1)])]),t._v(" "),r("div",{staticClass:"column is-4 has-text-centered"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-content"},[r("p",{staticClass:"title is-size-5-touch"},[t._v("Tray Return Rate")]),t._v(" "),r("card-widget",{key:t.selfReturn,staticClass:"tile is-child",attrs:{type:"is-success",icon:"charity",number:this.selfReturn,suffix:"%",label:"At this station",description:"Percentage of patrons who returned their trays to this tray return point"}})],1)]),t._v(" "),r("div",{staticClass:"card"},[r("div",{staticClass:"card-content"},[r("p",{staticClass:"title is-size-5-touch"},[t._v("Tray Return Visualisation")]),t._v(" "),r("pie-chart",{ref:"haichewPieChart",attrs:{chartData:this.haichewReturns}})],1)])]),t._v(" "),r("div",{staticClass:"column is-4 has-text-centered"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-content"},[r("p",{staticClass:"title is-size-5-touch"},[t._v("Cleaner's Average Clearing Count")]),t._v(" "),r("card-widget",{key:t.cleanerClear,staticClass:"tile is-child",attrs:{type:"is-info",icon:"broom",number:4,label:"At this station",description:"Average number of times cleaners have cleared the tray return point per day"}})],1)]),t._v(" "),r("div",{staticClass:"card"},[r("div",{staticClass:"card-content"},[r("bar-chart",{ref:"haichewBarChart",attrs:{chartData:this.overallInsights}})],1)])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LineChart:r(223).default,CardWidget:r(222).default,PieChart:r(224).default,BarChart:r(371).default})}}]);