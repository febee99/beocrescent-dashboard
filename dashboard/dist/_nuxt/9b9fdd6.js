(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{368:function(t,e,n){"use strict";n.r(e);var r=n(222),l=n(221),o={extends:n(226).b,props:["chartData","options"],methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}},c=n(22),d=Object(c.a)(o,void 0,void 0,!1,null,null,null).exports,h=(n(223),n(224),{name:"CardText",components:{CardComponent:l.default},props:{information:{type:String,default:null},label:{type:String,default:null}}}),f=Object(c.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("card-component",[e("div",{staticClass:"card-content"},[e("div",{staticClass:"is-widget-label"},[e("h3",{staticClass:"subtitle is-spaced is-size-6-touch"},[e("b",[this._v(this._s(this.label))])]),this._v(" "),e("h4",{staticClass:"body is-spaced is-size-5-touch text-wrap",staticStyle:{"word-wrap":"break-word"}},[e("pre",[this._v(this._s(this.information))])])])])])}),[],!1,null,null,null),v=f.exports;installComponents(f,{CardComponent:n(221).default});var C=n(227),m={head:function(){return{title:this.title}},components:{CardWidget:r.default,DoughnutChart:d,CardText:v},data:function(){return{g7tr:"",g7tb:"",g6:"",title:"Beo Crescent IoT Dashboard",lineChartAPIStatus:"Offline",lineChartTable:[],interval:null,trayReturnInsights:{labels:["A","B","C","D","E","F","G"],datasets:[{backgroundColor:["#ee4350","#409cd2","#80257d","#bfd2fb","#d6006d","#f5a167","#AEE1CD"],pointBackgroundColor:"white",borderWidth:1,pointBorderColor:"#249EBF",data:[60,200,100,250,300,500,140]}]},patronReturnInsights:{labels:["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"],datasets:[{type:"line",label:"G7-Tray-Return",fill:!1,borderColor:"#23d160",data:[0]},{type:"line",label:"G7-Tablevision",borderColor:"#ff3860",fill:!1,data:[0]},{type:"line",label:"G6-Tray-Return",borderColor:"#209cee",fill:!1,data:[0]}]}}},watch:{patronReturnInsights:function(){this.$refs.overallRateLineChart.renderChart(this.patronReturnInsights)}},methods:{startAPIPolling:function(t){t?(this.getLineChartData(),this.populateData()):clearInterval(this.interval)},getLineChartData:function(){var t=this;this.$axios.get(C.a.BASE+C.a.OVERVIEW).then((function(e){var data=e.data,n=data.g6,r=data["g7-tray"],l=data["g7-tablevision"];for(var o in n){var c=parseInt(o);c>9&&c<=15?(t.patronReturnInsights.datasets[0].data.push(r[o]),t.patronReturnInsights.datasets[1].data.push(l[o]),t.patronReturnInsights.datasets[2].data.push(n[o])):c>15&&c<20&&t.patronReturnInsights.datasets[1].data.push(l[o])}t.$refs.overallRateLineChart.renderChart(t.patronReturnInsights),t.lineChartAPIStatus="LIVE"}))},populateData:function(){var t=this;this.$axios.get(C.a.BASE+C.a.OVERVIEW2).then((function(e){var data=e.data;t.g6=data.g6,t.g7tr=data.g7tr,t.g7tb=data.g7tb}))}}},y=Object(c.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"columns is-vcentered is-multiline"},[n("div",{staticClass:"column is-4"},[n("card-text",{staticClass:"tile is-child",attrs:{label:"Basic Information",information:"1) Team 6 data starts from 10am to 3pm.\n2) Team 7 data starts from 9am to 4pm\n3) We took the percentage of positive tray \nreturn rates over time using all the days \nof data collected.\n4) Difference in both teamâ€™s positive tray \nreturn rate is due to the difference in \nhow we collect data."}})],1),t._v(" "),n("div",{staticClass:"column is-4"},[n("card-text",{staticClass:"tile is-child",attrs:{label:"Analysis",information:"1) Tray return rate during peak hours \n(Around 11pm to 2pm) is lower than during \nnon-peak periods. \n   \n   \n   \n   "}})],1),t._v(" "),n("div",{staticClass:"column is-4"},[n("card-text",{staticClass:"tile is-child",attrs:{label:"Reasons",information:"1) Cleaners are more active in clearing \ntables to allow other diners to use the \ntables during peak periods.\n2) During peak periods, it maybe harder to \nnavigate to tray return points hence \npatrons are less likely to clear.\n   \n   "}})],1)]),t._v(" "),n("div",{staticClass:"columns is-vcentered is-multiline"},[n("div",{staticClass:"column is-5"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("p",{staticClass:"title"},[t._v("Positive Tray Return Rate (%) Consolidated Data")]),t._v(" "),n("line-chart",{ref:"overallRateLineChart",attrs:{chartData:this.patronReturnInsights}})],1)])]),t._v(" "),n("div",{staticClass:"tile is-ancestor"},[n("div",{staticClass:"tile is-vertical is-block-tablet"},[n("div",{staticClass:"tile is-parent is-vertical"},[n("card-widget",{staticClass:"tile is-child notification has-background-success-light",attrs:{type:"is-dark",number:t.g7tr,suffix:"%",label:"G7 Tray Return",description:"Percentage of patrons who cleaned up their tables after eating (G7 Tray Return)"}}),t._v(" "),n("card-widget",{staticClass:"tile is-child notification has-background-danger-light",attrs:{type:"is-dark",number:t.g7tb,suffix:"%",label:"G7 Tablevision",description:"Percentage of patrons who cleaned up their tables after eating (G7 Tablevision)"}}),t._v(" "),n("card-widget",{staticClass:"tile is-child notification has-background-info-light",attrs:{type:"is-dark",number:t.g6,suffix:"%",label:"G6 Tray Return",description:"Percentage of patrons who cleaned up their tables after eating (G6 Tray Return)"}})],1)])])])])}),[],!1,null,null,null);e.default=y.exports;installComponents(y,{LineChart:n(223).default,CardWidget:n(222).default})},369:function(t,e,n){"use strict";n.r(e);n(364),n(57);var r=n(222),l=n(221),o=(n(223),n(227)),c=(n(224),{components:{CardWidget:r.default,CardComponent:l.default},computed:{selectedDate:function(){return this.date?this.date.getFullYear()+"-"+(parseInt(this.date.getMonth())+1)+"-"+this.date.getDate():"2020-10-12"}},data:function(){var t=new Date;return console.log("today is :"+t),{rfidFsrAPIStatus:"Offline",rfidTrayInStatus:"Offline",rfidTrayIn:[],rfidFsrTable:[],TrayIn:[],loaded:!1,rfid_loaded:!1,interval:null,cleanerReturn:0,selfReturn:0,date:new Date,minDate:new Date(t.getFullYear()-80,t.getMonth(),t.getDate()),maxDate:new Date(t.getFullYear()+18,t.getMonth(),t.getDate()),nanyuanReturns:{labels:["Patrons Return Count","Cleaner Return Count"],datasets:[{backgroundColor:["#ee4350","#409cd2"],pointBackgroundColor:"white",borderWidth:1,pointBorderColor:"#249EBF",data:[]}]},cleanerReturnInsights:{labels:["05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],datasets:[{label:"Tray OUT",BackgroundColor:"white",borderWidth:3,borderColor:"#ef4250",pointBorderColor:"#249EBF",data:[]},{label:"Tray IN",BackgroundColor:"#white",borderWidth:3,borderColor:"#7AD7F0",pointBorderColor:"#7AD7F0",data:[]}]}}},watch:{rfidFsrTable:function(){this.$refs.nanyuanLineChart.renderChart(this.cleanerReturnInsights)},rfidTrayIn:function(){this.$refs.nanyuanPieChart.renderChart(this.nanyuanReturns)},date:function(){this.getFsrRfidData(),this.getRfidTrayIn()}},methods:{startAPIPolling:function(t){t?(this.getFsrRfidData(),this.getRfidTrayIn()):clearInterval(this.interval)},getFsrRfidData:function(){var t=this;this.cleanerReturnInsights.datasets[0].data=[],this.cleanerReturnInsights.datasets[1].data=[];this.$axios.get(o.a.BASE+o.a.RFIDFSRVISIO).then((function(e){var data=e.data,n=t.selectedDate;console.log(n);var r=data[n];console.log(Object.keys(r));for(var l=0,o=Object.keys(r);l<o.length;l++){var time=o[l];console.log(time);var c=r[time];t.rfidFsrTable.push(c),t.cleanerReturnInsights.datasets[0].data.push(c)}t.rfidFsrAPIStatus="LIVE"})),this.$axios.get(o.a.BASE+o.a.RFIDTRAYIN).then((function(e){var data=e.data;console.log(data);var n=data[t.selectedDate];console.log(t.selectedDate),console.log(Object.keys(n));for(var r=0,l=Object.keys(n);r<l.length;r++){var time=l[r];console.log(time);var o=n[time];t.TrayIn.push(o),console.log("HELLO"),console.log(t.TrayIn),t.cleanerReturnInsights.datasets[1].data.push(o)}t.rfidFsrAPIStatus="LIVE"})).catch((function(e){if(t.rfidFsrAPIStatus="Offline",t.rfidFsrTable=[],null!=e.response){var n=e.response.data;t.toastAlert(n.message,"is-danger",5e3),console.log("nanyuan "+n.message)}else"Offline"!=t.rfidFsrAPIStatus&&(t.toastAlert(e,"is-danger",5e3),console.log("nanyuan "+e))}))},getRfidTrayIn:function(){var t=this;console.log(o.a.RFIDTRAYINOUT);this.$axios.get(o.a.BASE+o.a.RFIDTRAYINOUT).then((function(e){var data=e.data,n=data.CleanerReturn,r=data.SelfReturn;console.log(n),console.log(r);var l=r+n;t.cleanerReturn=parseFloat(n/l*100).toFixed(2),t.selfReturn=parseFloat(r/l*100).toFixed(2);t.nanyuanReturns.datasets[0].data=[r,n],t.rfidTrayIn.push(0),t.rfidFsrAPIStatus="LIVE"})).catch((function(e){if(t.rfidTrayInStatus="Offline",t.getRfidTrayIn1=[],null!=e.response){var n=e.response.data;t.toastAlert(n.message,"is-danger",5e3),console.log("nanyuan "+n.message)}else"Offline"!=t.rfidFsrAPIStatus&&(t.toastAlert(e,"is-danger",5e3),console.log("nanyuan "+e))}))}}}),d=n(22),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("p",{staticClass:"title m-5 pt-5"},[t._v("RFID-tagged tray-returns data")]),t._v(" "),n("div"),t._v(" "),n("div",{staticClass:"columns mt-5 is-multiline is-tablet"},[n("div",{staticClass:"column is-4 has-text-centered"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("p",{staticClass:"title is-size-5-touch"},[t._v("Daily Tray Return Count")]),t._v(" "),n("b-field",{attrs:{label:"Select a date"}},[n("b-datepicker",{attrs:{placeholder:"Click to select...","min-date":t.minDate,"max-date":t.maxDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),n("line-chart",{ref:"nanyuanLineChart",attrs:{chartData:this.cleanerReturnInsights}})],1)])]),t._v(" "),n("div",{staticClass:"column is-4 has-text-centered"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("p",{staticClass:"title is-size-5-touch"},[t._v("Tray Return Visualisation")]),t._v(" "),n("pie-chart",{ref:"nanyuanPieChart",attrs:{chartData:this.nanyuanReturns}})],1)])]),t._v(" "),n("div",{staticClass:"column is-4 has-text-centered"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("p",{staticClass:"title is-size-5-touch"},[t._v("Tray Return Rate")]),t._v(" "),n("card-widget",{staticClass:"tile is-child",attrs:{type:"is-success",icon:"charity",number:this.selfReturn,suffix:"%",label:"Self-returns rate",description:"Percentage of patrons who cleaned up their tables after eating today"}}),t._v(" "),n("card-widget",{staticClass:"tile is-child",attrs:{type:"is-danger",icon:"account-multiple-minus",number:this.cleanerReturn,suffix:"%",label:"Cleaner Return rate",description:"Percentage of patrons who left their receptacles to the cleaners today"}})],1)])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LineChart:n(223).default,PieChart:n(224).default,CardWidget:n(222).default})},370:function(t,e,n){"use strict";n.r(e);n(158),n(15),n(28),n(56);var r=n(222),l=n(221),o=(n(223),n(227)),c=(n(224),{components:{CardWidget:r.default,CardComponent:l.default},watch:{date:function(){this.fetchStatsByHour()},hourlyStats:function(){this.$refs.tablevisionChart.renderChart(this.tablevisionChartData)},didTriggerAPI:function(){this.didTriggerAPI?this.startAPIPolling(!0):(this.tableVisionAPIStatus="Offline",this.startAPIPolling(!1))}},data:function(){var t=new Date;return{didTriggerAPI:!1,tableVisionAPIStatus:"Offline",tables:[],selfReturnsPercentage:0,cleanerReturnPercentage:0,peakLazyReturns:0,totalOccupancy:0,maxLazyHour:6,ampm:"am",timing:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],lazyHour:6,hourlyStats:[],date:new Date,minDate:new Date(t.getFullYear()-80,t.getMonth(),t.getDate()),maxDate:new Date(t.getFullYear()+18,t.getMonth(),t.getDate()),tablevisionChartData:{labels:["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"],datasets:[{label:"Cleaner returns",BackgroundColor:"white",borderWidth:3,borderColor:"#ef4250",pointBorderColor:"#249EBF",data:[]},{label:"Self returns",BackgroundColor:"white",borderWidth:3,borderColor:"#7AD7F0",pointBorderColor:"#7AD7F0",data:[]}]},datasets:[{label:"Cleaner returns",BackgroundColor:"white",borderWidth:3,borderColor:"#ef4250",pointBorderColor:"#249EBF",data:[]},{label:"Self returns",BackgroundColor:"white",borderWidth:3,borderColor:"#7AD7F0",pointBorderColor:"#7AD7F0",data:[]}]}},mounted:function(){this.fetchStatsByHour()},methods:{indexOfMax:function(t){if(0===t.length)return-1;for(var e=t[0],n=0,i=1;i<t.length;i++)t[i]>e&&(n=i,e=t[i]);return n},startAPIPolling:function(t){var e=this;t?(this.fetchTableVacancy(),this.interval=setInterval((function(){e.fetchTableVacancy(),e.fetchTotalStats()}),1e3)):clearInterval(this.interval)},fetchTotalStats:function(){var t=this,e=this.getStringFormattedDate(this.date);this.$axios.get(o.a.BASE+o.a.TABLEVISIONSTATS+"/"+e.toString()).then((function(e){var data=e.data;t.selfReturnsPercentage=data.self,t.cleanerReturnPercentage=data.cleaner,t.totalOccupancy=data.total,t.maxLazyHour=t.indexOfMax(t.tablevisionChartData.datasets[0].data),t.maxLazyHour>=6&&(t.ampm="pm"),t.lazyHour=t.timing[t.maxLazyHour]})).catch((function(e){if(t.selfReturnsPercentage=0,t.cleanerReturnPercentage=0,t.totalOccupancy=0,null!=e.response){var n=e.response.data;t.toastAlert(n.message,"is-danger",5e3),console.log("table stats "+n.message)}else"Offline"!=t.tableVisionAPIStatus&&(t.toastAlert(e,"is-danger",5e3),console.log("table stats "+e))}))},fetchStatsByHour:function(){var t=this;this.tablevisionChartData.datasets[0].data=[],this.tablevisionChartData.datasets[1].data=[];var e=this.getStringFormattedDate(this.date);this.$axios.get(o.a.BASE+o.a.TABLEVISIONSTATS+"/per_hour/"+e).then((function(e){var n=new Object(e.data);for(var r in t.hourlyStats=n,n)0!=n[r].total&&(t.tablevisionChartData.datasets[0].data.push(n[r].true_cleaner_count),t.tablevisionChartData.datasets[1].data.push(n[r].true_self_count));t.maxLazyHour=t.indexOfMax(t.tablevisionChartData.datasets[0].data),t.maxLazyHour>=6&&(t.ampm="pm"),t.lazyHour=t.timing[t.maxLazyHour]})).catch((function(e){if(t.tableVisionAPIStatus="Offline",t.tables=[],null!=e.response){var n=e.response.data;t.toastAlert(n.message,"is-danger",5e3),console.log("table vision stats hourly "+n.message)}else t.toastAlert(e,"is-danger",5e3),console.log("table vision stats hour"+e)}))},getTodayDate:function(){function t(s){return s<10?"0"+s:s}var e=new Date;return[t(e.getDate()),t(e.getMonth()+1),e.getFullYear()].join("-")},getStringFormattedDate:function(t){function e(s){return s<10?"0"+s:s}var n=t;return[e(n.getDate()),e(n.getMonth()+1),n.getFullYear()].join("-")},fetchTableVacancy:function(){var t=this;this.$axios.get(o.a.BASE+o.a.TABLEVISION).then((function(e){var data=e.data;t.tables=data.tables,t.tableVisionAPIStatus="LIVE"})).catch((function(e){if(t.tableVisionAPIStatus="Offline",t.tables=[],null!=e.response){var n=e.response.data;t.toastAlert(n.message,"is-danger",5e3),console.log("table vision "+n.message)}else"Offline"!=t.tableVisionAPIStatus&&(t.toastAlert(e,"is-danger",5e3),console.log("table vision "+e))}))}}}),d=n(22),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("p",{staticClass:"title m-5 pt-5"},[t._v("Tablevision data")]),t._v(" "),n("div",{staticClass:"columns is-vcentered"},[n("div",{staticClass:"column is-5"},[n("div",{staticClass:"card has-background-info-light"},[n("div",{staticClass:"card-content"},[n("p",{staticClass:"title"},[t._v("Occupancy vs Self-Returns")]),t._v(" "),n("b-field",{attrs:{label:"Select a date"}},[n("b-datepicker",{attrs:{placeholder:"Click to select...","min-date":t.minDate,"max-date":t.maxDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),n("line-chart",{ref:"tablevisionChart",attrs:{chartData:this.tablevisionChartData}})],1)])]),t._v(" "),n("div",{staticClass:"column is-7"},[n("div",{staticClass:"card has-background-primary-light mb-5"},[n("div",{staticClass:"card-content"},[n("p",{staticClass:"title"},[t._v("Table occupancy")]),t._v(" "),n("p",{staticClass:"has-text-weight-bold"},[t._v("\n                        API Status:\n                        "),n("span",{class:"LIVE"==t.tableVisionAPIStatus?"has-text-success":"has-text-danger"},[t._v(t._s(this.tableVisionAPIStatus))])]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"field"},[n("b-switch",{model:{value:t.didTriggerAPI,callback:function(e){t.didTriggerAPI=e},expression:"didTriggerAPI"}},[t._v("\n                            Start API\n                        ")])],1),t._v(" "),t._l(t.tables,(function(e){return n("b-tag",{key:e.table,staticClass:"my-2 mx-2",attrs:{type:0==e.state?"is-success":1==e.state?"is-warning":"is-danger",size:"is-large",id:e.table}},[n("p",{staticClass:"has-text-weight-bold"},[t._v(t._s(e.table))])])})),t._v(" "),n("br"),t._v(" "),n("p",{staticClass:"subtitle has-text-left mt-5"},[t._v("Legend")]),t._v(" "),n("b-tag",{attrs:{type:"is-success",size:"is-small"}},[n("p",[t._v("Vacant")])]),t._v(" "),n("b-tag",{attrs:{type:"is-warning",size:"is-small"}},[n("p",[t._v("Vacant but uncleared")])]),t._v(" "),n("b-tag",{attrs:{type:"is-danger",size:"is-small"}},[n("p",[t._v("Occupied")])])],2)]),t._v(" "),n("div",{staticClass:"tile is-ancestor"},[n("div",{staticClass:"tile is-vertical is-block-tablet"},[n("div",{staticClass:"tile is-parent is-vertical"},[n("card-widget",{staticClass:"tile is-child notification has-background-success-light",attrs:{type:"is-dark",icon:"charity",number:this.selfReturnsPercentage,suffix:"%",label:"Self-returns rate today",description:"Percentage of patrons who cleaned up their tables after eating today"}}),t._v(" "),n("card-widget",{staticClass:"tile is-child notification has-background-danger-light",attrs:{type:"is-dark",icon:"silverware-clean",number:this.cleanerReturnPercentage,suffix:"%",label:"Rate of tables cleared by cleaners today",description:"Tables cleared by cleaners today in percentage"}}),t._v(" "),n("card-widget",{staticClass:"tile is-child notification has-background-warning-light",attrs:{type:"is-dark",icon:"account-multiple-minus",number:this.lazyHour,suffix:this.ampm,label:"Peak lazy patron time",description:"Time when people self-returned trays least"}})],1)])])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LineChart:n(223).default,CardWidget:n(222).default})},377:function(t,e,n){"use strict";n.r(e);var main=n(368),r=n(369),l=n(376),o=n(370),c={head:function(){return{title:this.title}},components:{Overview:main.default,Nanyuan:r.default,Haichew:l.default,Tablevision:o.default},data:function(){return{title:"Beo Crescent IoT Dashboard",activeTab:0}},watch:{activeTab:function(){console.log(this.activeTab),1==this.activeTab?(this.stopAllAPI(),this.triggerNYAPI()):2==this.activeTab?(this.stopAllAPI(),this.triggerHCAPI()):3==this.activeTab?(this.stopAllAPI(),this.triggerTVAPI()):(this.stopAllAPI(),this.triggerMainAPI())}},mounted:function(){this.triggerMainAPI()},methods:{stopAllAPI:function(){this.$refs.nanyuan.startAPIPolling(!1),this.$refs.tablevision.startAPIPolling(!1),this.$refs.haichew.startAPIPolling(!1),this.$refs.overview.startAPIPolling(!1)},triggerNYAPI:function(){this.$refs.nanyuan.startAPIPolling(!0)},triggerHCAPI:function(){this.$refs.haichew.startAPIPolling(!0)},triggerTVAPI:function(){},triggerMainAPI:function(){this.$refs.overview.startAPIPolling(!0)}}},d=n(22),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("b-tabs",{staticClass:"block",attrs:{position:"is-centered",size:"is-medium"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("b-tab-item",{attrs:{label:"Overview",icon:"information-variant"}},[n("Overview",{ref:"overview"})],1),t._v(" "),n("b-tab-item",{attrs:{label:"Nan Yuan Fishball",icon:"noodles"}},[n("Nanyuan",{ref:"nanyuan"})],1),t._v(" "),n("b-tab-item",{attrs:{label:"Hai Chew Fish Soup",icon:"rice"}},[n("Haichew",{ref:"haichew"})],1),t._v(" "),n("b-tab-item",{attrs:{label:"Tablevision",icon:"cctv"}},[n("Tablevision",{ref:"tablevision"})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);